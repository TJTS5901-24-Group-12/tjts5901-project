import{d as N,g as r,a as V,o as d,c as f,e as t,t as o,f as s,w as _,v as x,F as y,h as w,i as g}from"./app-BeiE3YtY.js";import{b as k}from"./route-block-B_A1xBdJ.js";function T(){return fetch("https://api.marketdata.app/v1/stocks/quotes/AAPL/").then(e=>e.json()).then(e=>Number.parseFloat(e.last)).catch(e=>{throw new Error("Error fetching data:",e)})}async function j(i,e){const n=await T(),u=n*1.1,c=n*.9;if(!i)throw new Error("Invalid amount of stocks");if(!Number.isInteger(i))throw new Error("Quantity cannot be a float.");if(!e||e<c||e>u)throw new Error("Price must be +-10% of the last traded price!");return console.log("Transaction was successful!"),!0}function A(i,e,n){n.push({id:n.length,amount:i,price:e})}const v={fetchPrice:T,validateTransaction:j,submitTransaction:A},D=t("div",{"text-4xl":""},[t("div",{"i-carbon-finance":"","inline-block":""})],-1),F=t("p",null,[t("a",{rel:"noreferrer",href:"https://github.com/antfu/vitesse",target:"_blank"}," Brokerage ABC ")],-1),L={"text-sm":"","opacity-75":""},O=t("hr",{"ml-auto":"","mr-auto":"","mt-6":"","w-100":""},null,-1),U=t("p",{"mb-2":"","mt-6":""},[t("em",{"text-sm":""},[g("Latest traded price: "),t("b",{id:"lastPrice"}," 182.2 "),g(" (fetched hourly)")])],-1),S={"m-a":"","w-xl":"",border:"","border-rd":""},q={"w-full":"",flex:"","justify-center":"","flex-items-center":""},M={flex:"","flex-col":"","flex-items-start":""},Q=["placeholder"],z={flex:"","flex-col":"","flex-items-start":"",style:{"margin-left":"22px"}},G=["placeholder"],H={"mb-2":"","mt-4":""},J={"text-sm":""},K=["disabled"],R={class:"flex-column m-auto mt-10 w-75 flex justify-center"},W=t("b",{class:"color-bluegray-800"},"Bids",-1),X={class:"ml-12"},Y=t("b",{class:"color-bluegray-800"},"Offers",-1),Z=N({__name:"index",setup(i){const e=r(0),n=r(0),u=r(!0),c=r(!1);r(0);const p=r([]),b=r([]);async function B(){return e.value>0&&n.value>0?await v.validateTransaction(e.value,n.value):!1}async function P(){await B()&&(u.value?v.submitTransaction(e.value,n.value,p.value):v.submitTransaction(e.value,n.value,b.value))}function C(){e.value=0,n.value=0,h()}function h(){u.value=!0,c.value=!1}function E(){c.value=!0,u.value=!1}const{t:l}=V();return($,m)=>(d(),f("div",null,[D,F,t("p",null,[t("em",L,o(s(l)("intro.desc")),1)]),O,U,t("div",null,[t("button",{style:{width:"15%"},"m-3":"","text-sm":"","bid-btn":"",onClick:h},o(s(l)("button.bid")),1),t("button",{style:{width:"15%"},"m-3":"","text-sm":"","offer-btn":"",onClick:E},o(s(l)("button.offer")),1)]),t("fieldset",S,[t("legend",null,o(u.value&&!c.value?"Bid":"Offer"),1),t("div",q,[t("div",M,[t("em",null,o(s(l)("intro.amount")),1),_(t("input",{id:"amount","onUpdate:modelValue":m[0]||(m[0]=a=>e.value=a),placeholder:s(l)("intro.amount"),type:"number",p:"y-2",w:"220px",text:"center",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},null,8,Q),[[x,e.value]])]),t("div",z,[t("em",null,o(s(l)("intro.price")),1),_(t("input",{id:"price","onUpdate:modelValue":m[1]||(m[1]=a=>n.value=a),placeholder:s(l)("intro.price"),type:"number",p:"y-2",w:"220px",text:"center",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},null,8,G),[[x,n.value]])])]),t("p",H,[t("em",J,"Total: "+o(e.value&&n.value?e.value*n.value:0)+" USD",1)])]),t("div",null,[t("button",{style:{width:"15%"},"m-3":"","text-sm":"","cancel-btn":"",onClick:C},o(s(l)("button.cancel")),1),t("button",{style:{width:"15%"},"m-3":"","text-sm":"","confirm-btn":"",disabled:!n.value||!e.value,onClick:P},o(s(l)("button.confirm")),9,K)]),t("div",R,[t("div",null,[W,t("ul",null,[(d(!0),f(y,null,w(p.value,a=>(d(),f("li",{key:a.id},o(a.amount)+" @ "+o(a.price),1))),128))])]),t("div",X,[Y,t("ul",null,[(d(!0),f(y,null,w(b.value,a=>(d(),f("li",{key:a.id},o(a.amount)+" @ "+o(a.price),1))),128))])])])]))}});typeof k=="function"&&k(Z);export{Z as default};
